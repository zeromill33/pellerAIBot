# Story 9.4: 配置示例与运营 SOP 文档落地

## Status
Draft

## Story
**As a** 运维/开发者，
**I want** 有一份可直接参考的配置示例与运营 SOP 文档，
**so that** 我能快速完成部署并按标准流程触发/回查/发布。

## Acceptance Criteria
1. 提供 `config.example.yaml`，覆盖非敏感配置（如 telegram 频道、parse_mode、disable_preview、admin_user_ids、rate_limit 等）。
2. 提供 `.env.example`，仅包含敏感项（如 TG/Tavily/LLM key），并有清晰注释说明用途。
3. 提供运营 SOP 文档（放在 `docs/ops/`），描述最小闭环流程：/publish 触发、/status 查询、/regen 重生成与限流、发布策略（自动/审核）。
4. SOP 文档中明确“落地后发布”的顺序、失败回执与重试建议（与架构文档一致）。

## Tasks / Subtasks
- [ ] Task 1：整理并落地 `config.example.yaml`（AC: 1）
  - [ ] 覆盖 telegram、rate_limit、tavily lanes 等非敏感项
  - [ ] 标注默认值与可覆盖项
- [ ] Task 2：整理并落地 `.env.example`（AC: 2）
  - [ ] 仅包含敏感密钥（TG/Tavily/LLM）
  - [ ] 说明每个变量的用途
- [ ] Task 3：编写运营 SOP 文档（AC: 3, 4）
  - [ ] 描述 /publish /status /regen 命令与回执含义
  - [ ] 说明发布策略（auto/approve）与“先落地后发布”
  - [ ] 说明 /regen 限流规则与被拒时的操作建议
- [ ] Task 4：基础校对与一致性检查（AC: 1–4）
  - [ ] 与架构配置键一致
  - [ ] 与当前实现中的配置键一致（config schema / defaults）
  - [ ] 不包含任何敏感信息

## Dev Notes

### 相关技术/结构约束
- 项目使用 `config.yaml` 承载非敏感配置，敏感项通过环境变量注入。 [Source: architecture/tech-stack.md#11) 配置与密钥管理]
- 运营触发入口为 Telegram Admin Bot，命令包含 `/publish`、`/regen`、`/status`。 [Source: architecture/architecture-core.md#1.3 运营触发入口（推荐方案）]
- 流水线顺序强调“先落地再发布”，Validator 不通过则阻断发布但仍落地记录。 [Source: architecture/architecture-core.md#4.1 主流程（单事件）]
- 重生成限流为 per slug：5 分钟 1 次、1 小时 5 次（配置化）。 [Source: architecture/architecture-core.md#8.1 重复生成限流（per event）]
- 关键配置项包含 `telegram.channel_chat_id` 与 `rate_limit.regenerate.*`。 [Source: architecture/architecture-core.md#14. 附：关键配置（与 PRD 对齐）]

### 关联模块（仅限架构文档允许范围）
- `config.example.yaml` 与 `.env.example` 出现在项目结构建议中。 [Source: architecture/source-tree.md#源码目录结构（AI Signal Bot）]
- `docs/ops/` 为运维/运行文档位置。 [Source: architecture/source-tree.md#源码目录结构（AI Signal Bot）]

### 当前仓库文档现状（代码事实）
- 已存在 `docs/ops/e2e.md`（E2E 运行指南），需评估是否复用/扩展还是新增独立 SOP 文档。

### Testing
- 文档类变更无需代码测试，但需保证示例配置可用且不含密钥。

## Change Log

| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2026-01-29 | v0.1 | 创建 E9-S4 故事草案 | Bob (SM) |
| 2026-01-29 | v0.2 | 补充现有文档现状与一致性检查 | Bob (SM) |

## Dev Agent Record

### Agent Model Used

### Debug Log References

### Completion Notes List

### File List

## QA Results
